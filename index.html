<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <title>SANIC</title>

    <style>
        body,
        html {
            background-color: transparent;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>

    <div style="
        width: 1160px;
        height: 70px;
        border: 1px solid red;
        margin-left: 20px;
        position: relative;
        background-color: transparent;
    ">
        <img id="sonic" src="sonic-running.gif" style="
            height: 53px;
            position: absolute;
            top: 10px;
            transition: left 0.5s;
        ">
    </div>

    <script>
        function update_sonic () {

            var api_key = 'AIzaSyCbI-zMjgqjt0Ml7C16VCghFj00pYKHUvo';
            var g_table_id = '1rlQTXBrdEn-a4bg4Vb2vO8NKp0w6Jfh3Khz7XMXodhM';

            $.get(
                'https://sheets.googleapis.com/v4/spreadsheets/' + g_table_id + '/values/Лист1?key=' + api_key,
                function (response) {
                    var total_completed = parseInt(response.values[1][1].split('/')[0]) + parseInt(response.values[1][2].split('/')[0]);

                    var left_for_sonic = 1100 / 350 * total_completed;

                    left_for_sonic = left_for_sonic + 'px';

                    $('#sonic').css('left', left_for_sonic);

                    if (total_completed >= 350) {
                        $('#sonic').css('height', '60px');
                        $('#sonic').css('top', '3px');
                        $('#sonic').attr('src', 'sonic-super.png');
                    } else {
                        $('#sonic').css('height', '53px');
                        $('#sonic').css('top', '10px');
                        $('#sonic').attr('src', 'sonic-running.gif');
                    }
                }
            );

            setTimeout(update_sonic, 60000);
        }

        update_sonic();
    </script>

</body>

</html>

